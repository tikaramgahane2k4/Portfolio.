<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5, user-scalable=yes">
    <meta name="description" content="Tikaram Gahane - Backend Developer | Python | Flask | FastAPI | PostgreSQL">
    <meta name="theme-color" content="#000000">
    <meta name="color-scheme" content="dark light">
    <title>{% block title %}Tikaram | Creative Developer & Designer{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://unpkg.com/lucide@latest"></script>
    {% block head %}{% endblock %}
</head>

<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-content">
            <div class="splash-icon">
                <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Monitor/Screen -->
                    <rect x="40" y="50" width="120" height="80" rx="4" fill="none" stroke="currentColor" stroke-width="3" class="code-screen"/>
                    <!-- Code Lines -->
                    <line x1="55" y1="70" x2="90" y2="70" stroke="var(--accent-teal)" stroke-width="2.5" class="code-line line-1"/>
                    <line x1="55" y1="85" x2="120" y2="85" stroke="var(--accent-pink)" stroke-width="2.5" class="code-line line-2"/>
                    <line x1="55" y1="100" x2="105" y2="100" stroke="var(--accent-gold)" stroke-width="2.5" class="code-line line-3"/>
                    <line x1="55" y1="115" x2="135" y2="115" stroke="var(--primary)" stroke-width="2.5" class="code-line line-4"/>
                    <!-- Monitor Stand -->
                    <rect x="85" y="130" width="30" height="15" rx="2" fill="currentColor" class="stand"/>
                    <rect x="70" y="145" width="60" height="4" rx="2" fill="currentColor" class="base"/>
                    <!-- Cursor Blink -->
                    <circle cx="140" cy="115" r="2" fill="var(--primary)" class="cursor-blink"/>
                </svg>
            </div>
            <h1 class="splash-title">Welcome to My Portfolio</h1>
            <div class="splash-loader">
                <div class="loader-bar"></div>
            </div>
        </div>
    </div>

    <div class="mesh-bg"></div>

    <header id="header">
        <div class="container">
            <div class="inner nav-content">
                <a href="/" class="logo" aria-label="Tikaram's Portfolio - Home">Tikaram.</a>
                <nav class="nav-links desktop-only" aria-label="Main Navigation">
                    <a href="{{ url_for('index') }}#about">About</a>
                    <a href="{{ url_for('index') }}#projects">Work</a>
                    <a href="{{ url_for('index') }}#education">Education</a>
                    <a href="{{ url_for('index') }}#skills">Skills</a>
                    <a href="{{ url_for('resume') }}" class="btn-resume">Resume</a>
                </nav>
                <div class="header-actions">
                    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark/light theme">
                        <i data-lucide="moon" class="moon" aria-hidden="true"></i>
                        <i data-lucide="sun" class="sun" aria-hidden="true"></i>
                    </button>
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle mobile menu"
                        aria-expanded="false" aria-controls="mobile-menu">
                        <i data-lucide="menu" aria-hidden="true"></i>
                    </button>
                </div>
                <div class="btn-contact-wrapper desktop-only">
                    <a href="{{ url_for('index') }}#contact" class="btn-contact-inner">Get in Touch</a>
                </div>
            </div>
        </div>
    </header>

    <div class="mobile-menu" id="mobile-menu" role="navigation" aria-label="Mobile Navigation">
        <div class="mobile-menu-inner">
            <button class="mobile-menu-close" id="mobile-menu-close" aria-label="Close mobile menu">
                <i data-lucide="x" aria-hidden="true"></i>
            </button>
            <nav class="mobile-nav">
                <a href="{{ url_for('index') }}#about" class="mobile-link">About</a>
                <a href="{{ url_for('index') }}#projects" class="mobile-link">Work</a>
                <a href="{{ url_for('index') }}#education" class="mobile-link">Education</a>
                <a href="{{ url_for('index') }}#skills" class="mobile-link">Skills</a>
                <a href="{{ url_for('resume') }}" class="mobile-link">Resume</a>
                <a href="{{ url_for('index') }}#contact" class="btn-contact-inner mobile-contact">Get in Touch</a>
            </nav>
        </div>
    </div>

    <main id="main-content">
        {% block content %}{% endblock %}
    </main>

    <footer role="contentinfo">
        <div class="container">
            <nav class="social-links" aria-label="Social Media Links">
                <a href="https://github.com/tikaramgahane2k4" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <i data-lucide="github" aria-hidden="true"></i>
                </a>
                <a href="https://twitter.com/tikaram_gahane" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
                    <i data-lucide="twitter" aria-hidden="true"></i>
                </a>
                <a href="https://www.linkedin.com/in/tikaram-gahane-1804bb343/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                    <i data-lucide="linkedin" aria-hidden="true"></i>
                </a>
                <a href="https://www.instagram.com/pawan_gahane_07" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                    <i data-lucide="instagram" aria-hidden="true"></i>
                </a>
            </nav>
            <p class="copyright">Â© 2025-2026 Tikaram Gahane. Built with passion and code.</p>
        </div>
    </footer>

    <script>
        // Splash Screen Logic - only show once per session and skip on internal nav
        const splashScreen = document.getElementById('splashScreen');
        if (splashScreen) {
            const splashShown = sessionStorage.getItem('splashShown');

            const hideSplash = () => {
                splashScreen.classList.add('fade-out');
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }, 650);
            };

            if (splashShown) {
                splashScreen.style.display = 'none';
                document.body.style.overflow = 'auto';
            } else {
                // flag immediately so route changes in the same session skip the splash
                sessionStorage.setItem('splashShown', 'true');
                document.body.style.overflow = 'hidden';
                window.addEventListener('load', () => {
                    setTimeout(hideSplash, 2200);
                });
            }
        }

        // Detect touch device
        function isTouchDevice() {
            return (('ontouchstart' in window) ||
                (navigator.maxTouchPoints > 0) ||
                (navigator.msMaxTouchPoints > 0));
        }

        // Add class to body for touch devices
        if (isTouchDevice()) {
            document.body.classList.add('touch-device');
        }

        // Initialize Lucide icons
        lucide.createIcons();

        // Scroll Reveal Logic
        const revealCallback = (entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    // observer.unobserve(entry.target); // Keep observing if we want repeat animations
                }
            });
        };

        const revealObserver = new IntersectionObserver(revealCallback, {
            threshold: 0.1
        });

        const initReveal = () => {
            const revealElements = document.querySelectorAll('.reveal, .reveal-left, .reveal-right');
            revealElements.forEach(el => revealObserver.observe(el));
        };
        initReveal();

        // Theme Toggle Logic
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;

        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            html.classList.add('light-mode');
        } else if (!savedTheme && window.matchMedia('(prefers-color-scheme: light)').matches) {
            html.classList.add('light-mode');
        }

        const toggleTheme = () => {
            html.classList.toggle('light-mode');
            const currentTheme = html.classList.contains('light-mode') ? 'light' : 'dark';
            localStorage.setItem('theme', currentTheme);
        };

        themeToggle.addEventListener('click', toggleTheme);
        
        // Add keyboard support
        themeToggle.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleTheme();
            }
        });

        // Header scroll effect with smooth transition
        let lastScroll = 0;
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            const currentScroll = window.scrollY;

            if (currentScroll > 50) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }

            // Hide header on scroll down, show on scroll up
            // if (currentScroll > lastScroll && currentScroll > 100) {
            //     header.style.transform = 'translateY(-100%)';
            // } else {
            //     header.style.transform = 'translateY(0)';
            // }
            header.style.transform = 'translateY(0)';

            lastScroll = currentScroll;
        }, { passive: true });

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href !== '#' && href !== '') {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        const headerOffset = 100; // 80px header + 20px padding for full content visibility
                        const elementPosition = target.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                        
                        // Close mobile menu if open
                        const mobileMenu = document.getElementById('mobile-menu');
                        if (mobileMenu && mobileMenu.classList.contains('active')) {
                            mobileMenu.classList.remove('active');
                            document.body.style.overflow = 'auto';
                            document.getElementById('mobile-menu-toggle').setAttribute('aria-expanded', 'false');
                        }
                    }
                }
            });
        });

        // Mobile Menu Logic with improved touch handling
        const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
        const mobileMenuClose = document.getElementById('mobile-menu-close');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileLinks = document.querySelectorAll('.mobile-link');

        const openMenu = () => {
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
            mobileMenuToggle.setAttribute('aria-expanded', 'true');
            // Focus on first link for keyboard navigation
            const firstLink = mobileMenu.querySelector('.mobile-link');
            if (firstLink) firstLink.focus();
        };

        const closeMenu = () => {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = 'auto';
            mobileMenuToggle.setAttribute('aria-expanded', 'false');
            mobileMenuToggle.focus();
        };

        mobileMenuToggle.addEventListener('click', openMenu);
        mobileMenuClose.addEventListener('click', closeMenu);
        mobileLinks.forEach(link => link.addEventListener('click', closeMenu));

        // Close menu on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
                closeMenu();
            }
        });

        // Close menu when clicking outside
        mobileMenu.addEventListener('click', (e) => {
            if (e.target === mobileMenu) {
                closeMenu();
            }
        });

    </script>
    {% block scripts %}{% endblock %}
</body>

</html>